#!/bin/bash

## Installation wrapper for one-liner installations

# Ensure the script is run as root
if [[ $EUID -ne 0 ]]; then
   echo "This script must be run as root. Please use sudo."
   exit 1
fi

# Download the actual installation script to a temporary location
TEMP_SCRIPT=$(mktemp)
curl -s https://raw.githubusercontent.com/pxpxltd/service-restarter/refs/heads/master/dist/install.sh -o "$TEMP_SCRIPT"

# Check if the download succeeded
if [[ $? -ne 0 ]]; then
    echo "Error: Failed to download the installation script."
    exit 1
fi

# Make the script executable
chmod +x "$TEMP_SCRIPT"

# Run the installation script
bash "$TEMP_SCRIPT"

# Clean up
rm -f "$TEMP_SCRIPT"